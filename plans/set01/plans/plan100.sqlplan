<?xml version="1.0" encoding="utf-8"?>
<ShowPlanXML xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan" Version="1.2" Build="11.0.3412.0">
  <BatchSequence>
    <Batch>
      <Statements>
        <StmtSimple StatementText="CREATE PROCEDURE [dbo].[AutoRerun_RefreshPrimaryTeus]&#xD;&#xA;    @mixGuidId uniqueidentifier&#xD;&#xA;    ,@recalculateAllTeus bit = 1&#xD;&#xA;AS&#xD;&#xA;-- Refreshes primary status of TEUs of a mix, and the corresponding cached aggregate counts on resolved TED. &#xD;&#xA;&#xD;&#xA;-- The calculation of primary status inspects TEUs in mix, and chooses the last rerun value as primary. If input @recalculateAllTeus=0, it&#xD;&#xA;-- does not visit non-rerun TEUs. &#xD;&#xA;&#xD;&#xA;-- After determination of primary, the aggregate count values for that TED are re-calculated for all the primary TEUs.&#xD;&#xA;BEGIN&#xD;&#xA;    SET NOCOUNT ON;&#xD;&#xA;   " StatementId="1" StatementCompId="2" StatementType="SET ON/OFF" RetrievedFromCache="true" />
        <StmtSimple StatementText=" SET XACT_ABORT ON;&#xD;&#xA;&#xD;&#xA;   " StatementId="2" StatementCompId="3" StatementType="SET ON/OFF" RetrievedFromCache="true" />
        <StmtSimple StatementText=" DECLARE @mixId int;&#xD;&#xA;    DECLARE @returnStatus int;&#xD;&#xA;    DECLARE @resolvedTedId int;&#xD;&#xA;    DECLARE @idString varchar(64);&#xD;&#xA;    DECLARE @targetRootTeus table(Id bigint, MixId int);&#xD;&#xA;    &#xD;&#xA;    DECLARE @DoTran&#x9;BIT&#x9;= 1&#xD;&#xA;   " StatementId="3" StatementCompId="5" StatementType="ASSIGN" RetrievedFromCache="true" />
        <StmtCond StatementText=" IF(@@TRANCOUNT&gt;0)" StatementId="4" StatementCompId="6" StatementType="COND" RetrievedFromCache="true">
          <Condition />
          <Then>
            <Statements>
              <StmtSimple StatementText=" SET @DoTran=0 &#xD;&#xA;&#xD;&#xA;   " StatementId="5" StatementCompId="7" StatementType="ASSIGN" RetrievedFromCache="true" />
            </Statements>
          </Then>
        </StmtCond>
        <StmtSimple StatementText=" DECLARE @stopwatchBeginTime datetime2; &#xD;&#xA;    SELECT @stopwatchBeginTime = [dbo].[fnBeginStopwatch]();&#xD;&#xA;   &#xD;&#xA;    -- Find identity identifiers.&#xD;&#xA;   " StatementId="6" StatementCompId="9" StatementType="ASSIGN WITH QUERY" RetrievedFromCache="true" />
        <StmtSimple StatementText=" SELECT &#xD;&#xA;        @mixId = M.Id&#xD;&#xA;        ,@resolvedTedId = RT.Id&#xD;&#xA;    FROM dbo.Mix AS M WITH (NOLOCK)&#xD;&#xA;    INNER JOIN dbo.ResolvedTED AS RT WITH (NOLOCK) ON M.Id = RT.MixId&#xD;&#xA;    WHERE M.[Guid] = @mixGuidId;&#xD;&#xA;&#xD;&#xA;    -- Verify the mix exists.&#xD;&#xA;   " StatementId="7" StatementCompId="10" StatementType="SELECT" RetrievedFromCache="true" StatementSubTreeCost="0.00657421" StatementEstRows="1.72587" StatementOptmLevel="FULL" QueryHash="0xF6D9848F8A547948" QueryPlanHash="0x5B7641E9C0BB4D88" StatementOptmEarlyAbortReason="GoodEnoughPlanFound">
          <StatementSetOptions QUOTED_IDENTIFIER="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" NUMERIC_ROUNDABORT="false" />
          <QueryPlan NonParallelPlanReason="MaxDOPSetToOne" CachedPlanSize="16" CompileTime="6" CompileCPU="6" CompileMemory="600">
            <MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0" />
            <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="193313" EstimatedPagesCached="773254" EstimatedAvailableDegreeOfParallelism="1" />
            <RelOp NodeId="0" PhysicalOp="Nested Loops" LogicalOp="Inner Join" EstimateRows="1.72587" EstimateIO="0" EstimateCPU="7.21415e-006" AvgRowSize="15" EstimatedTotalSubtreeCost="0.00657421" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
              <OutputList>
                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Mix]" Alias="[M]" Column="Id" />
                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[ResolvedTED]" Alias="[RT]" Column="Id" />
              </OutputList>
              <NestedLoops Optimized="0">
                <OuterReferences>
                  <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Mix]" Alias="[M]" Column="Id" />
                </OuterReferences>
                <RelOp NodeId="1" PhysicalOp="Index Seek" LogicalOp="Index Seek" EstimateRows="1" EstimateIO="0.003125" EstimateCPU="0.0001581" AvgRowSize="11" EstimatedTotalSubtreeCost="0.0032831" TableCardinality="1.48176e+006" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                  <OutputList>
                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Mix]" Alias="[M]" Column="Id" />
                  </OutputList>
                  <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                    <DefinedValues>
                      <DefinedValue>
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Mix]" Alias="[M]" Column="Id" />
                      </DefinedValue>
                    </DefinedValues>
                    <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[Mix]" Index="[Mix_IDX_Guid]" Alias="[M]" IndexKind="NonClustered" />
                    <SeekPredicates>
                      <SeekPredicateNew>
                        <SeekKeys>
                          <Prefix ScanType="EQ">
                            <RangeColumns>
                              <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Mix]" Alias="[M]" Column="Guid" />
                            </RangeColumns>
                            <RangeExpressions>
                              <ScalarOperator ScalarString="[@mixGuidId]">
                                <Identifier>
                                  <ColumnReference Column="@mixGuidId" />
                                </Identifier>
                              </ScalarOperator>
                            </RangeExpressions>
                          </Prefix>
                        </SeekKeys>
                      </SeekPredicateNew>
                    </SeekPredicates>
                  </IndexScan>
                </RelOp>
                <RelOp NodeId="2" PhysicalOp="Index Seek" LogicalOp="Index Seek" EstimateRows="1.72587" EstimateIO="0.003125" EstimateCPU="0.000158898" AvgRowSize="11" EstimatedTotalSubtreeCost="0.0032839" TableCardinality="1.37084e+006" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                  <OutputList>
                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[ResolvedTED]" Alias="[RT]" Column="Id" />
                  </OutputList>
                  <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                    <DefinedValues>
                      <DefinedValue>
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[ResolvedTED]" Alias="[RT]" Column="Id" />
                      </DefinedValue>
                    </DefinedValues>
                    <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[ResolvedTED]" Index="[ResolvedTED_IDX_MixId]" Alias="[RT]" IndexKind="NonClustered" />
                    <SeekPredicates>
                      <SeekPredicateNew>
                        <SeekKeys>
                          <Prefix ScanType="EQ">
                            <RangeColumns>
                              <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[ResolvedTED]" Alias="[RT]" Column="MixId" />
                            </RangeColumns>
                            <RangeExpressions>
                              <ScalarOperator ScalarString="[OurLabReporting].[dbo].[Mix].[Id] as [M].[Id]">
                                <Identifier>
                                  <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Mix]" Alias="[M]" Column="Id" />
                                </Identifier>
                              </ScalarOperator>
                            </RangeExpressions>
                          </Prefix>
                        </SeekKeys>
                      </SeekPredicateNew>
                    </SeekPredicates>
                  </IndexScan>
                </RelOp>
              </NestedLoops>
            </RelOp>
            <ParameterList>
              <ColumnReference Column="@mixGuidId" ParameterCompiledValue="{guid'F7E62124-D925-4CE6-A40E-0ED127D8156A'}" />
            </ParameterList>
          </QueryPlan>
        </StmtSimple>
        <StmtCond StatementText=" IF @mixId IS NULL&#xD;&#xA;   " StatementId="8" StatementCompId="11" StatementType="COND" RetrievedFromCache="true">
          <Condition />
          <Then>
            <Statements>
              <StmtSimple StatementText=" BEGIN&#xD;&#xA;        SET @idString = CONVERT(varchar(64), @mixGuidId);&#xD;&#xA;       " StatementId="9" StatementCompId="12" StatementType="ASSIGN" RetrievedFromCache="true" />
              <StmtSimple StatementText=" RAISERROR('Mix %s or its corresponding TED does not exist.', 15, 1, @idString);&#xD;&#xA;       " StatementId="10" StatementCompId="13" StatementType="RAISERROR" RetrievedFromCache="true" />
              <StmtSimple StatementText=" GOTO ProcErrorExit;&#xD;&#xA;   " StatementId="11" StatementCompId="14" StatementType="GOTO" RetrievedFromCache="true" />
            </Statements>
          </Then>
        </StmtCond>
        <StmtCond StatementText=" END;&#xD;&#xA;&#xD;&#xA;    IF @@TRANCOUNT = 0 AND @DoTran = 1" StatementId="12" StatementCompId="16" StatementType="COND" RetrievedFromCache="true">
          <Condition />
          <Then>
            <Statements>
              <StmtSimple StatementText=" BEGIN TRAN&#xD;&#xA;        -- Determine TEUs that need primary status be calculated. If request is not to recalculate all, only calculate primary for reruns.&#xD;&#xA;       " StatementId="13" StatementCompId="17" StatementType="BEGIN TRANSACTION" RetrievedFromCache="true" />
            </Statements>
          </Then>
        </StmtCond>
        <StmtCond StatementText=" IF @recalculateAllTeus = 0&#xD;&#xA;       " StatementId="14" StatementCompId="19" StatementType="COND" RetrievedFromCache="true">
          <Condition />
          <Then>
            <Statements>
              <StmtSimple StatementText=" BEGIN&#xD;&#xA;            -- When calculating primary for reruns only, retrieve root TEUs that have a rerun in the mix. &#xD;&#xA;            INSERT INTO @targetRootTeus(Id, MixId)&#xD;&#xA;            SELECT &#xD;&#xA;                rootTeu.Id&#xD;&#xA;                ,rootTeu.MixId&#xD;&#xA;            FROM dbo.Teu AS rootTeu WITH (NOLOCK)&#xD;&#xA;            WHERE &#xD;&#xA;                rootTeu.MixId = @mixId &#xD;&#xA;                AND rootTeu.RerunSourceId IS NULL&#xD;&#xA;                AND EXISTS(SELECT 1 FROM dbo.Teu AS rerunTeu WITH (NOLOCK) WHERE rootTeu.MixId = rerunTeu.MixId AND rootTeu.Id = rerunTeu.RerunSourceId);&#xD;&#xA;       " StatementId="15" StatementCompId="20" StatementType="INSERT" RetrievedFromCache="true" StatementSubTreeCost="0.0585595" StatementEstRows="144.686" StatementOptmLevel="FULL" QueryHash="0x31927528C9B947CA" QueryPlanHash="0x78CC6DC6CB86E882" StatementOptmEarlyAbortReason="GoodEnoughPlanFound">
                <StatementSetOptions QUOTED_IDENTIFIER="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" NUMERIC_ROUNDABORT="false" />
                <QueryPlan NonParallelPlanReason="MaxDOPSetToOne" CachedPlanSize="24" CompileTime="21" CompileCPU="21" CompileMemory="944">
                  <MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0" />
                  <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="193313" EstimatedPagesCached="773254" EstimatedAvailableDegreeOfParallelism="1" />
                  <RelOp NodeId="0" PhysicalOp="Table Insert" LogicalOp="Insert" EstimateRows="144.686" EstimateIO="0.01" EstimateCPU="0.000144686" AvgRowSize="9" EstimatedTotalSubtreeCost="0.0585595" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                    <OutputList />
                    <Update DMLRequestSort="0">
                      <Object Table="[@targetRootTeus]" />
                      <SetPredicate>
                        <ScalarOperator ScalarString="[Id] = [OurLabReporting].[dbo].[TEU].[Id] as [rootTeu].[Id],[MixId] = [OurLabReporting].[dbo].[TEU].[MixId] as [rootTeu].[MixId]">
                          <ScalarExpressionList>
                            <ScalarOperator>
                              <MultipleAssign>
                                <Assign>
                                  <ColumnReference Column="Id" />
                                  <ScalarOperator>
                                    <Identifier>
                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="Id" />
                                    </Identifier>
                                  </ScalarOperator>
                                </Assign>
                                <Assign>
                                  <ColumnReference Column="MixId" />
                                  <ScalarOperator>
                                    <Identifier>
                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="MixId" />
                                    </Identifier>
                                  </ScalarOperator>
                                </Assign>
                              </MultipleAssign>
                            </ScalarOperator>
                          </ScalarExpressionList>
                        </ScalarOperator>
                      </SetPredicate>
                      <RelOp NodeId="2" PhysicalOp="Merge Join" LogicalOp="Inner Join" EstimateRows="143.924" EstimateIO="0" EstimateCPU="0.0112337" AvgRowSize="19" EstimatedTotalSubtreeCost="0.0484148" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                        <OutputList>
                          <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="Id" />
                          <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="MixId" />
                        </OutputList>
                        <Merge ManyToMany="0">
                          <InnerSideJoinColumns>
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="Id" />
                          </InnerSideJoinColumns>
                          <OuterSideJoinColumns>
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                          </OuterSideJoinColumns>
                          <Residual>
                            <ScalarOperator ScalarString="[OurLabReporting].[dbo].[TEU].[Id] as [rootTeu].[Id]=[OurLabReporting].[dbo].[TEU].[RerunSourceId] as [rerunTeu].[RerunSourceId]">
                              <Compare CompareOp="EQ">
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="Id" />
                                  </Identifier>
                                </ScalarOperator>
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                  </Identifier>
                                </ScalarOperator>
                              </Compare>
                            </ScalarOperator>
                          </Residual>
                          <RelOp NodeId="3" PhysicalOp="Stream Aggregate" LogicalOp="Aggregate" EstimateRows="163.715" EstimateIO="0" EstimateCPU="0.00141929" AvgRowSize="15" EstimatedTotalSubtreeCost="0.0197799" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                            <OutputList>
                              <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                            </OutputList>
                            <StreamAggregate>
                              <DefinedValues />
                              <GroupBy>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                              </GroupBy>
                              <RelOp NodeId="4" PhysicalOp="Index Seek" LogicalOp="Index Seek" EstimateRows="2674.87" EstimateIO="0.0152612" EstimateCPU="0.00309936" AvgRowSize="15" EstimatedTotalSubtreeCost="0.0183606" TableCardinality="4.12024e+007" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                <OutputList>
                                  <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                </OutputList>
                                <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                                  <DefinedValues>
                                    <DefinedValue>
                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                    </DefinedValue>
                                  </DefinedValues>
                                  <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_IDX_Mix]" Alias="[rerunTeu]" IndexKind="NonClustered" />
                                  <SeekPredicates>
                                    <SeekPredicateNew>
                                      <SeekKeys>
                                        <Prefix ScanType="EQ">
                                          <RangeColumns>
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="MixId" />
                                          </RangeColumns>
                                          <RangeExpressions>
                                            <ScalarOperator ScalarString="[@mixId]">
                                              <Identifier>
                                                <ColumnReference Column="@mixId" />
                                              </Identifier>
                                            </ScalarOperator>
                                          </RangeExpressions>
                                        </Prefix>
                                      </SeekKeys>
                                    </SeekPredicateNew>
                                  </SeekPredicates>
                                </IndexScan>
                              </RelOp>
                            </StreamAggregate>
                          </RelOp>
                          <RelOp NodeId="6" PhysicalOp="Index Seek" LogicalOp="Index Seek" EstimateRows="2512.15" EstimateIO="0.0144779" EstimateCPU="0.00292037" AvgRowSize="19" EstimatedTotalSubtreeCost="0.0173983" TableCardinality="4.12024e+007" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                            <OutputList>
                              <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="Id" />
                              <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="MixId" />
                            </OutputList>
                            <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                              <DefinedValues>
                                <DefinedValue>
                                  <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="Id" />
                                </DefinedValue>
                                <DefinedValue>
                                  <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="MixId" />
                                </DefinedValue>
                              </DefinedValues>
                              <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_IDX_Mix]" Alias="[rootTeu]" IndexKind="NonClustered" />
                              <SeekPredicates>
                                <SeekPredicateNew>
                                  <SeekKeys>
                                    <Prefix ScanType="EQ">
                                      <RangeColumns>
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="MixId" />
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="RerunSourceId" />
                                      </RangeColumns>
                                      <RangeExpressions>
                                        <ScalarOperator ScalarString="[@mixId]">
                                          <Identifier>
                                            <ColumnReference Column="@mixId" />
                                          </Identifier>
                                        </ScalarOperator>
                                        <ScalarOperator ScalarString="NULL">
                                          <Const ConstValue="NULL" />
                                        </ScalarOperator>
                                      </RangeExpressions>
                                    </Prefix>
                                  </SeekKeys>
                                </SeekPredicateNew>
                              </SeekPredicates>
                            </IndexScan>
                          </RelOp>
                        </Merge>
                      </RelOp>
                    </Update>
                  </RelOp>
                </QueryPlan>
              </StmtSimple>
            </Statements>
          </Then>
          <Else>
            <Statements>
              <StmtSimple StatementText=" END&#xD;&#xA;        ELSE BEGIN&#xD;&#xA;            -- When calculating primary for all TEUs, retrieve all the root TEUs in the mix. &#xD;&#xA;            INSERT INTO @targetRootTeus(Id, MixId)&#xD;&#xA;            SELECT &#xD;&#xA;                rootTeu.Id&#xD;&#xA;                ,rootTeu.MixId&#xD;&#xA;            FROM dbo.Teu AS rootTeu WITH (NOLOCK)&#xD;&#xA;            WHERE &#xD;&#xA;                rootTeu.MixId = @mixId &#xD;&#xA;                AND rootTeu.RerunSourceId IS NULL;&#xD;&#xA;       " StatementId="16" StatementCompId="23" StatementType="INSERT" RetrievedFromCache="true" StatementSubTreeCost="0.0625221" StatementEstRows="2512.15" StatementOptmLevel="FULL" QueryHash="0xF49D9233295F404B" QueryPlanHash="0x4B9802148D57A0AC" StatementOptmEarlyAbortReason="GoodEnoughPlanFound">
                <StatementSetOptions QUOTED_IDENTIFIER="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" NUMERIC_ROUNDABORT="false" />
                <QueryPlan NonParallelPlanReason="MaxDOPSetToOne" CachedPlanSize="16" CompileTime="1" CompileCPU="1" CompileMemory="520">
                  <MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0" />
                  <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="193313" EstimatedPagesCached="773254" EstimatedAvailableDegreeOfParallelism="1" />
                  <RelOp NodeId="0" PhysicalOp="Table Insert" LogicalOp="Insert" EstimateRows="2512.15" EstimateIO="0.0426117" EstimateCPU="0.00251215" AvgRowSize="9" EstimatedTotalSubtreeCost="0.0625221" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                    <OutputList />
                    <Update DMLRequestSort="0">
                      <Object Table="[@targetRootTeus]" />
                      <SetPredicate>
                        <ScalarOperator ScalarString="[Id] = [OurLabReporting].[dbo].[TEU].[Id] as [rootTeu].[Id],[MixId] = [OurLabReporting].[dbo].[TEU].[MixId] as [rootTeu].[MixId]">
                          <ScalarExpressionList>
                            <ScalarOperator>
                              <MultipleAssign>
                                <Assign>
                                  <ColumnReference Column="Id" />
                                  <ScalarOperator>
                                    <Identifier>
                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="Id" />
                                    </Identifier>
                                  </ScalarOperator>
                                </Assign>
                                <Assign>
                                  <ColumnReference Column="MixId" />
                                  <ScalarOperator>
                                    <Identifier>
                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="MixId" />
                                    </Identifier>
                                  </ScalarOperator>
                                </Assign>
                              </MultipleAssign>
                            </ScalarOperator>
                          </ScalarExpressionList>
                        </ScalarOperator>
                      </SetPredicate>
                      <RelOp NodeId="1" PhysicalOp="Index Seek" LogicalOp="Index Seek" EstimateRows="2512.15" EstimateIO="0.0144779" EstimateCPU="0.00292037" AvgRowSize="19" EstimatedTotalSubtreeCost="0.0173983" TableCardinality="4.12024e+007" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                        <OutputList>
                          <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="Id" />
                          <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="MixId" />
                        </OutputList>
                        <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                          <DefinedValues>
                            <DefinedValue>
                              <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="Id" />
                            </DefinedValue>
                            <DefinedValue>
                              <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="MixId" />
                            </DefinedValue>
                          </DefinedValues>
                          <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_IDX_Mix]" Alias="[rootTeu]" IndexKind="NonClustered" />
                          <SeekPredicates>
                            <SeekPredicateNew>
                              <SeekKeys>
                                <Prefix ScanType="EQ">
                                  <RangeColumns>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="MixId" />
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rootTeu]" Column="RerunSourceId" />
                                  </RangeColumns>
                                  <RangeExpressions>
                                    <ScalarOperator ScalarString="[@mixId]">
                                      <Identifier>
                                        <ColumnReference Column="@mixId" />
                                      </Identifier>
                                    </ScalarOperator>
                                    <ScalarOperator ScalarString="NULL">
                                      <Const ConstValue="NULL" />
                                    </ScalarOperator>
                                  </RangeExpressions>
                                </Prefix>
                              </SeekKeys>
                            </SeekPredicateNew>
                          </SeekPredicates>
                        </IndexScan>
                      </RelOp>
                    </Update>
                  </RelOp>
                </QueryPlan>
              </StmtSimple>
            </Statements>
          </Else>
        </StmtCond>
        <StmtSimple StatementText=" END;&#xD;&#xA;&#xD;&#xA;        -- Refresh the primary TEU status in the mix.&#xD;&#xA;        WITH rerunTeuCte(RootRerunId, Id, MixId, RerunSourceId, RerunExecutionOrder) AS&#xD;&#xA;        (&#xD;&#xA;            -- Anchor CTE query on original root TEUs in the mix. Root TEUs do not have a rerun source. &#xD;&#xA;            SELECT &#xD;&#xA;                rootTeu.Id AS RootRerunId&#xD;&#xA;                ,rootTeu.Id&#xD;&#xA;                ,rootTeu.MixId&#xD;&#xA;                ,RerunSourceId = CAST(NULL AS BIGINT)&#xD;&#xA;                ,RerunExecutionOrder = 0&#xD;&#xA;            FROM @targetRootTeus AS rootTeu &#xD;&#xA;&#xD;&#xA;            UNION ALL&#xD;&#xA;&#xD;&#xA;            -- Recursively, find all rerun instances of the anchored TEUs. &#xD;&#xA;            SELECT &#xD;&#xA;                previousTeu.RootRerunId&#xD;&#xA;                ,rerunTeu.Id&#xD;&#xA;                ,rerunTeu.MixId&#xD;&#xA;                ,rerunTeu.RerunSourceId&#xD;&#xA;                ,RerunExecutionOrder = (previousTeu.RerunExecutionOrder + 1)&#xD;&#xA;            FROM dbo.Teu AS rerunTeu  WITH (NOLOCK)&#xD;&#xA;            INNER JOIN rerunTeuCte AS previousTeu ON rerunTeu.MixId = previousTeu.MixId AND rerunTeu.RerunSourceId = previousTeu.Id &#xD;&#xA;            WHERE rerunTeu.MixId = @mixId&#xD;&#xA;        )&#xD;&#xA;        UPDATE T&#xD;&#xA;        SET T.IsRerunPrimary = R.IsRerunPrimary&#xD;&#xA;            ,T.RecordLastUpdated = GETDATE()&#xD;&#xA;        FROM dbo.Teu AS T&#xD;&#xA;        INNER JOIN &#xD;&#xA;        (&#xD;&#xA;            -- Group TEUs by the root TEU. Within each group, sort in descending order of rerun execution. This implies the last rerun of each&#xD;&#xA;            -- root TEU will have a primary rank of 1.&#xD;&#xA;            SELECT &#xD;&#xA;                Id &#xD;&#xA;                ,IsRerunPrimary = (CASE RANK() OVER (PARTITION BY RootRerunId ORDER BY RerunExecutionOrder DESC, Id DESC) &#xD;&#xA;                                        WHEN 1 THEN 1&#xD;&#xA;                                        ELSE 0&#xD;&#xA;                                   END)&#xD;&#xA;            FROM rerunTeuCte &#xD;&#xA;        ) AS R ON R.Id = T.Id&#xD;&#xA;        WHERE T.IsRerunPrimary &lt;&gt; R.IsRerunPrimary;&#xD;&#xA;&#xD;&#xA;        -- Refresh counts of primary TEUs in the TED. Even if primary did not change, we conservatively recalculate all counts, because historically&#xD;&#xA;        -- the uploader proc is not able to accurately represent TEU status counts. &#xD;&#xA;       " StatementId="17" StatementCompId="25" StatementType="UPDATE" RetrievedFromCache="true" StatementSubTreeCost="0.668516" StatementEstRows="1" StatementOptmLevel="FULL" QueryHash="0xAEF7714080DD342B" QueryPlanHash="0xF7A8188615FD659" StatementOptmEarlyAbortReason="TimeOut">
          <StatementSetOptions QUOTED_IDENTIFIER="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" NUMERIC_ROUNDABORT="false" />
          <QueryPlan NonParallelPlanReason="MaxDOPSetToOne" CachedPlanSize="120" CompileTime="13" CompileCPU="13" CompileMemory="1296">
            <MemoryGrantInfo SerialRequiredMemory="1536" SerialDesiredMemory="1632" />
            <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="193313" EstimatedPagesCached="773254" EstimatedAvailableDegreeOfParallelism="1" />
            <RelOp NodeId="1" PhysicalOp="Clustered Index Update" LogicalOp="Update" EstimateRows="1" EstimateIO="0.06" EstimateCPU="6e-006" AvgRowSize="9" EstimatedTotalSubtreeCost="0.668516" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
              <OutputList />
              <Update DMLRequestSort="0">
                <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_PK]" Alias="[T]" IndexKind="Clustered" />
                <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_IDX_FeaturePathId]" Alias="[T]" IndexKind="NonClustered" />
                <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_IDX_Id]" Alias="[T]" IndexKind="NonClustered" />
                <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[TEU_IDX_LastUpdated]" Alias="[T]" IndexKind="NonClustered" />
                <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_IDX_Mix]" Alias="[T]" IndexKind="NonClustered" />
                <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_IDX_ResolvedTED]" Alias="[T]" IndexKind="NonClustered" />
                <SetPredicate>
                  <ScalarOperator ScalarString="[OurLabReporting].[dbo].[TEU].[IsRerunPrimary] as [T].[IsRerunPrimary] = [Expr1022],[OurLabReporting].[dbo].[TEU].[RecordLastUpdated] as [T].[RecordLastUpdated] = [Expr1023]">
                    <ScalarExpressionList>
                      <ScalarOperator>
                        <MultipleAssign>
                          <Assign>
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="IsRerunPrimary" />
                            <ScalarOperator>
                              <Identifier>
                                <ColumnReference Column="Expr1022" />
                              </Identifier>
                            </ScalarOperator>
                          </Assign>
                          <Assign>
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="RecordLastUpdated" />
                            <ScalarOperator>
                              <Identifier>
                                <ColumnReference Column="Expr1023" />
                              </Identifier>
                            </ScalarOperator>
                          </Assign>
                        </MultipleAssign>
                      </ScalarOperator>
                    </ScalarExpressionList>
                  </ScalarOperator>
                </SetPredicate>
                <RelOp NodeId="2" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="1e-007" AvgRowSize="44" EstimatedTotalSubtreeCost="0.60851" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                  <OutputList>
                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="Id" />
                    <ColumnReference Column="Expr1022" />
                    <ColumnReference Column="Expr1023" />
                    <ColumnReference Column="Expr1039" />
                    <ColumnReference Column="Expr1040" />
                    <ColumnReference Column="Expr1041" />
                    <ColumnReference Column="Expr1042" />
                    <ColumnReference Column="Expr1043" />
                  </OutputList>
                  <ComputeScalar>
                    <DefinedValues>
                      <DefinedValue>
                        <ColumnReference Column="Expr1039" />
                        <ScalarOperator ScalarString="[Expr1039]">
                          <Identifier>
                            <ColumnReference Column="Expr1039" />
                          </Identifier>
                        </ScalarOperator>
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Column="Expr1040" />
                        <ScalarOperator ScalarString="[Expr1040]">
                          <Identifier>
                            <ColumnReference Column="Expr1040" />
                          </Identifier>
                        </ScalarOperator>
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Column="Expr1041" />
                        <ScalarOperator ScalarString="[Expr1041]">
                          <Identifier>
                            <ColumnReference Column="Expr1041" />
                          </Identifier>
                        </ScalarOperator>
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Column="Expr1042" />
                        <ScalarOperator ScalarString="[Expr1042]">
                          <Identifier>
                            <ColumnReference Column="Expr1042" />
                          </Identifier>
                        </ScalarOperator>
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Column="Expr1043" />
                        <ScalarOperator ScalarString="[Expr1043]">
                          <Identifier>
                            <ColumnReference Column="Expr1043" />
                          </Identifier>
                        </ScalarOperator>
                      </DefinedValue>
                    </DefinedValues>
                    <RelOp NodeId="3" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="1e-007" AvgRowSize="44" EstimatedTotalSubtreeCost="0.60851" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                      <OutputList>
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="Id" />
                        <ColumnReference Column="Expr1022" />
                        <ColumnReference Column="Expr1023" />
                        <ColumnReference Column="Expr1039" />
                        <ColumnReference Column="Expr1040" />
                        <ColumnReference Column="Expr1041" />
                        <ColumnReference Column="Expr1042" />
                        <ColumnReference Column="Expr1043" />
                      </OutputList>
                      <ComputeScalar>
                        <DefinedValues>
                          <DefinedValue>
                            <ColumnReference Column="Expr1039" />
                            <ScalarOperator ScalarString="CASE WHEN [Expr1026] THEN (0) ELSE (1) END">
                              <IF>
                                <Condition>
                                  <ScalarOperator>
                                    <Identifier>
                                      <ColumnReference Column="Expr1026" />
                                    </Identifier>
                                  </ScalarOperator>
                                </Condition>
                                <Then>
                                  <ScalarOperator>
                                    <Const ConstValue="(0)" />
                                  </ScalarOperator>
                                </Then>
                                <Else>
                                  <ScalarOperator>
                                    <Const ConstValue="(1)" />
                                  </ScalarOperator>
                                </Else>
                              </IF>
                            </ScalarOperator>
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Column="Expr1040" />
                            <ScalarOperator ScalarString="CASE WHEN [Expr1026] THEN (0) ELSE (1) END">
                              <IF>
                                <Condition>
                                  <ScalarOperator>
                                    <Identifier>
                                      <ColumnReference Column="Expr1026" />
                                    </Identifier>
                                  </ScalarOperator>
                                </Condition>
                                <Then>
                                  <ScalarOperator>
                                    <Const ConstValue="(0)" />
                                  </ScalarOperator>
                                </Then>
                                <Else>
                                  <ScalarOperator>
                                    <Const ConstValue="(1)" />
                                  </ScalarOperator>
                                </Else>
                              </IF>
                            </ScalarOperator>
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Column="Expr1041" />
                            <ScalarOperator ScalarString="CASE WHEN [Expr1027] THEN (0) ELSE (1) END">
                              <IF>
                                <Condition>
                                  <ScalarOperator>
                                    <Identifier>
                                      <ColumnReference Column="Expr1027" />
                                    </Identifier>
                                  </ScalarOperator>
                                </Condition>
                                <Then>
                                  <ScalarOperator>
                                    <Const ConstValue="(0)" />
                                  </ScalarOperator>
                                </Then>
                                <Else>
                                  <ScalarOperator>
                                    <Const ConstValue="(1)" />
                                  </ScalarOperator>
                                </Else>
                              </IF>
                            </ScalarOperator>
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Column="Expr1042" />
                            <ScalarOperator ScalarString="CASE WHEN [Expr1026] THEN (0) ELSE (1) END">
                              <IF>
                                <Condition>
                                  <ScalarOperator>
                                    <Identifier>
                                      <ColumnReference Column="Expr1026" />
                                    </Identifier>
                                  </ScalarOperator>
                                </Condition>
                                <Then>
                                  <ScalarOperator>
                                    <Const ConstValue="(0)" />
                                  </ScalarOperator>
                                </Then>
                                <Else>
                                  <ScalarOperator>
                                    <Const ConstValue="(1)" />
                                  </ScalarOperator>
                                </Else>
                              </IF>
                            </ScalarOperator>
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Column="Expr1043" />
                            <ScalarOperator ScalarString="CASE WHEN [Expr1026] THEN (0) ELSE (1) END">
                              <IF>
                                <Condition>
                                  <ScalarOperator>
                                    <Identifier>
                                      <ColumnReference Column="Expr1026" />
                                    </Identifier>
                                  </ScalarOperator>
                                </Condition>
                                <Then>
                                  <ScalarOperator>
                                    <Const ConstValue="(0)" />
                                  </ScalarOperator>
                                </Then>
                                <Else>
                                  <ScalarOperator>
                                    <Const ConstValue="(1)" />
                                  </ScalarOperator>
                                </Else>
                              </IF>
                            </ScalarOperator>
                          </DefinedValue>
                        </DefinedValues>
                        <RelOp NodeId="4" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="1e-007" AvgRowSize="24" EstimatedTotalSubtreeCost="0.60851" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                          <OutputList>
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="Id" />
                            <ColumnReference Column="Expr1022" />
                            <ColumnReference Column="Expr1023" />
                            <ColumnReference Column="Expr1026" />
                            <ColumnReference Column="Expr1027" />
                          </OutputList>
                          <ComputeScalar>
                            <DefinedValues>
                              <DefinedValue>
                                <ColumnReference Column="Expr1022" />
                                <ScalarOperator ScalarString="CONVERT_IMPLICIT(bit,CASE WHEN [Expr1020]=(1) THEN (1) ELSE (0) END,0)">
                                  <Convert DataType="bit" Style="0" Implicit="1">
                                    <ScalarOperator>
                                      <IF>
                                        <Condition>
                                          <ScalarOperator>
                                            <Compare CompareOp="EQ">
                                              <ScalarOperator>
                                                <Identifier>
                                                  <ColumnReference Column="Expr1020" />
                                                </Identifier>
                                              </ScalarOperator>
                                              <ScalarOperator>
                                                <Const ConstValue="(1)" />
                                              </ScalarOperator>
                                            </Compare>
                                          </ScalarOperator>
                                        </Condition>
                                        <Then>
                                          <ScalarOperator>
                                            <Const ConstValue="(1)" />
                                          </ScalarOperator>
                                        </Then>
                                        <Else>
                                          <ScalarOperator>
                                            <Const ConstValue="(0)" />
                                          </ScalarOperator>
                                        </Else>
                                      </IF>
                                    </ScalarOperator>
                                  </Convert>
                                </ScalarOperator>
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Column="Expr1023" />
                                <ScalarOperator ScalarString="getdate()">
                                  <Identifier>
                                    <ColumnReference Column="ConstExpr1028">
                                      <ScalarOperator>
                                        <Intrinsic FunctionName="getdate" />
                                      </ScalarOperator>
                                    </ColumnReference>
                                  </Identifier>
                                </ScalarOperator>
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Column="Expr1026" />
                                <ScalarOperator ScalarString="CASE WHEN [OurLabReporting].[dbo].[TEU].[IsRerunPrimary] as [T].[IsRerunPrimary] = CONVERT_IMPLICIT(bit,CASE WHEN [Expr1020]=(1) THEN (1) ELSE (0) END,0) THEN (1) ELSE (0) END">
                                  <IF>
                                    <Condition>
                                      <ScalarOperator>
                                        <Compare CompareOp="BINARY IS">
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="IsRerunPrimary" />
                                            </Identifier>
                                          </ScalarOperator>
                                          <ScalarOperator>
                                            <Convert DataType="bit" Style="0" Implicit="1">
                                              <ScalarOperator>
                                                <IF>
                                                  <Condition>
                                                    <ScalarOperator>
                                                      <Compare CompareOp="EQ">
                                                        <ScalarOperator>
                                                          <Identifier>
                                                            <ColumnReference Column="Expr1020" />
                                                          </Identifier>
                                                        </ScalarOperator>
                                                        <ScalarOperator>
                                                          <Const ConstValue="(1)" />
                                                        </ScalarOperator>
                                                      </Compare>
                                                    </ScalarOperator>
                                                  </Condition>
                                                  <Then>
                                                    <ScalarOperator>
                                                      <Const ConstValue="(1)" />
                                                    </ScalarOperator>
                                                  </Then>
                                                  <Else>
                                                    <ScalarOperator>
                                                      <Const ConstValue="(0)" />
                                                    </ScalarOperator>
                                                  </Else>
                                                </IF>
                                              </ScalarOperator>
                                            </Convert>
                                          </ScalarOperator>
                                        </Compare>
                                      </ScalarOperator>
                                    </Condition>
                                    <Then>
                                      <ScalarOperator>
                                        <Const ConstValue="(1)" />
                                      </ScalarOperator>
                                    </Then>
                                    <Else>
                                      <ScalarOperator>
                                        <Const ConstValue="(0)" />
                                      </ScalarOperator>
                                    </Else>
                                  </IF>
                                </ScalarOperator>
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Column="Expr1027" />
                                <ScalarOperator ScalarString="CASE WHEN [OurLabReporting].[dbo].[TEU].[RecordLastUpdated] as [T].[RecordLastUpdated] = getdate() THEN (1) ELSE (0) END">
                                  <IF>
                                    <Condition>
                                      <ScalarOperator>
                                        <Compare CompareOp="BINARY IS">
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="RecordLastUpdated" />
                                            </Identifier>
                                          </ScalarOperator>
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Column="ConstExpr1028">
                                                <ScalarOperator>
                                                  <Intrinsic FunctionName="getdate" />
                                                </ScalarOperator>
                                              </ColumnReference>
                                            </Identifier>
                                          </ScalarOperator>
                                        </Compare>
                                      </ScalarOperator>
                                    </Condition>
                                    <Then>
                                      <ScalarOperator>
                                        <Const ConstValue="(1)" />
                                      </ScalarOperator>
                                    </Then>
                                    <Else>
                                      <ScalarOperator>
                                        <Const ConstValue="(0)" />
                                      </ScalarOperator>
                                    </Else>
                                  </IF>
                                </ScalarOperator>
                              </DefinedValue>
                            </DefinedValues>
                            <RelOp NodeId="5" PhysicalOp="Sort" LogicalOp="Distinct Sort" EstimateRows="1" EstimateIO="0.0112613" EstimateCPU="0.00139169" AvgRowSize="32" EstimatedTotalSubtreeCost="0.60851" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                              <OutputList>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="Id" />
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="IsRerunPrimary" />
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="RecordLastUpdated" />
                                <ColumnReference Column="Expr1020" />
                              </OutputList>
                              <MemoryFractions Input="0.333333" Output="1" />
                              <Sort Distinct="1">
                                <OrderBy>
                                  <OrderByColumn Ascending="1">
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="Id" />
                                  </OrderByColumn>
                                </OrderBy>
                                <RelOp NodeId="6" PhysicalOp="Nested Loops" LogicalOp="Inner Join" EstimateRows="119.899" EstimateIO="0" EstimateCPU="0.000748027" AvgRowSize="32" EstimatedTotalSubtreeCost="0.595857" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                  <OutputList>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="Id" />
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="IsRerunPrimary" />
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="RecordLastUpdated" />
                                    <ColumnReference Column="Expr1020" />
                                  </OutputList>
                                  <NestedLoops Optimized="1" WithUnorderedPrefetch="1">
                                    <OuterReferences>
                                      <ColumnReference Column="Recr1016" />
                                      <ColumnReference Column="Expr1020" />
                                      <ColumnReference Column="Expr1055" />
                                    </OuterReferences>
                                    <RelOp NodeId="9" PhysicalOp="Sequence Project" LogicalOp="Compute Scalar" EstimateRows="178.954" EstimateIO="0" EstimateCPU="1.07372e-005" AvgRowSize="23" EstimatedTotalSubtreeCost="0.28513" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                      <OutputList>
                                        <ColumnReference Column="Recr1016" />
                                        <ColumnReference Column="Expr1020" />
                                      </OutputList>
                                      <SequenceProject>
                                        <DefinedValues>
                                          <DefinedValue>
                                            <ColumnReference Column="Expr1020" />
                                            <ScalarOperator ScalarString="rank">
                                              <Sequence FunctionName="rank" />
                                            </ScalarOperator>
                                          </DefinedValue>
                                        </DefinedValues>
                                        <RelOp NodeId="10" PhysicalOp="Segment" LogicalOp="Segment" EstimateRows="178.954" EstimateIO="0" EstimateCPU="3.57907e-006" AvgRowSize="23" EstimatedTotalSubtreeCost="0.28512" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                          <OutputList>
                                            <ColumnReference Column="Recr1015" />
                                            <ColumnReference Column="Recr1016" />
                                            <ColumnReference Column="Recr1019" />
                                            <ColumnReference Column="Segment1053" />
                                            <ColumnReference Column="Segment1054" />
                                          </OutputList>
                                          <Segment>
                                            <GroupBy>
                                              <ColumnReference Column="Recr1015" />
                                              <ColumnReference Column="Recr1019" />
                                              <ColumnReference Column="Recr1016" />
                                            </GroupBy>
                                            <SegmentColumn>
                                              <ColumnReference Column="Segment1054" />
                                            </SegmentColumn>
                                            <RelOp NodeId="11" PhysicalOp="Segment" LogicalOp="Segment" EstimateRows="178.954" EstimateIO="0" EstimateCPU="3.57907e-006" AvgRowSize="23" EstimatedTotalSubtreeCost="0.285116" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                              <OutputList>
                                                <ColumnReference Column="Recr1015" />
                                                <ColumnReference Column="Recr1016" />
                                                <ColumnReference Column="Recr1019" />
                                                <ColumnReference Column="Segment1053" />
                                              </OutputList>
                                              <Segment>
                                                <GroupBy>
                                                  <ColumnReference Column="Recr1015" />
                                                </GroupBy>
                                                <SegmentColumn>
                                                  <ColumnReference Column="Segment1053" />
                                                </SegmentColumn>
                                                <RelOp NodeId="12" PhysicalOp="Sort" LogicalOp="Sort" EstimateRows="178.954" EstimateIO="0.0112613" EstimateCPU="0.00218916" AvgRowSize="27" EstimatedTotalSubtreeCost="0.285112" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                  <OutputList>
                                                    <ColumnReference Column="Recr1015" />
                                                    <ColumnReference Column="Recr1016" />
                                                    <ColumnReference Column="Recr1019" />
                                                  </OutputList>
                                                  <MemoryFractions Input="1" Output="0.333333" />
                                                  <Sort Distinct="0">
                                                    <OrderBy>
                                                      <OrderByColumn Ascending="1">
                                                        <ColumnReference Column="Recr1015" />
                                                      </OrderByColumn>
                                                      <OrderByColumn Ascending="0">
                                                        <ColumnReference Column="Recr1019" />
                                                      </OrderByColumn>
                                                      <OrderByColumn Ascending="0">
                                                        <ColumnReference Column="Recr1016" />
                                                      </OrderByColumn>
                                                    </OrderBy>
                                                    <RelOp NodeId="13" PhysicalOp="Index Spool" LogicalOp="Lazy Spool" EstimateRows="178.954" EstimateIO="0" EstimateCPU="8.94769e-007" AvgRowSize="27" EstimatedTotalSubtreeCost="0.271662" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                      <OutputList>
                                                        <ColumnReference Column="Expr1052" />
                                                        <ColumnReference Column="Recr1015" />
                                                        <ColumnReference Column="Recr1016" />
                                                        <ColumnReference Column="Recr1017" />
                                                        <ColumnReference Column="Recr1018" />
                                                        <ColumnReference Column="Recr1019" />
                                                      </OutputList>
                                                      <Spool Stack="1">
                                                        <RelOp NodeId="14" PhysicalOp="Concatenation" LogicalOp="Concatenation" EstimateRows="178.954" EstimateIO="0" EstimateCPU="1.78954e-007" AvgRowSize="27" EstimatedTotalSubtreeCost="0.270189" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                          <OutputList>
                                                            <ColumnReference Column="Expr1052" />
                                                            <ColumnReference Column="Recr1015" />
                                                            <ColumnReference Column="Recr1016" />
                                                            <ColumnReference Column="Recr1017" />
                                                            <ColumnReference Column="Recr1018" />
                                                            <ColumnReference Column="Recr1019" />
                                                          </OutputList>
                                                          <Concat>
                                                            <DefinedValues>
                                                              <DefinedValue>
                                                                <ColumnReference Column="Expr1052" />
                                                                <ColumnReference Column="Expr1049" />
                                                                <ColumnReference Column="Expr1051" />
                                                              </DefinedValue>
                                                              <DefinedValue>
                                                                <ColumnReference Column="Recr1015" />
                                                                <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="Id" />
                                                                <ColumnReference Column="Recr1009" />
                                                              </DefinedValue>
                                                              <DefinedValue>
                                                                <ColumnReference Column="Recr1016" />
                                                                <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="Id" />
                                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="Id" />
                                                              </DefinedValue>
                                                              <DefinedValue>
                                                                <ColumnReference Column="Recr1017" />
                                                                <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="MixId" />
                                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="MixId" />
                                                              </DefinedValue>
                                                              <DefinedValue>
                                                                <ColumnReference Column="Recr1018" />
                                                                <ColumnReference Column="Expr1005" />
                                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                                              </DefinedValue>
                                                              <DefinedValue>
                                                                <ColumnReference Column="Recr1019" />
                                                                <ColumnReference Column="Expr1006" />
                                                                <ColumnReference Column="Expr1014" />
                                                              </DefinedValue>
                                                            </DefinedValues>
                                                            <RelOp NodeId="15" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="1.78954e-006" AvgRowSize="27" EstimatedTotalSubtreeCost="1.78954e-006" Parallel="0" EstimateRebinds="178.954" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                              <OutputList>
                                                                <ColumnReference Column="Expr1049" />
                                                                <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="Id" />
                                                                <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="Id" />
                                                                <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="MixId" />
                                                                <ColumnReference Column="Expr1005" />
                                                                <ColumnReference Column="Expr1006" />
                                                              </OutputList>
                                                              <ComputeScalar>
                                                                <DefinedValues>
                                                                  <DefinedValue>
                                                                    <ColumnReference Column="Expr1049" />
                                                                    <ScalarOperator ScalarString="(0)">
                                                                      <Const ConstValue="(0)" />
                                                                    </ScalarOperator>
                                                                  </DefinedValue>
                                                                </DefinedValues>
                                                                <RelOp NodeId="16" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="1e-007" AvgRowSize="31" EstimatedTotalSubtreeCost="0.0032832" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                                  <OutputList>
                                                                    <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="Id" />
                                                                    <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="MixId" />
                                                                    <ColumnReference Column="Expr1005" />
                                                                    <ColumnReference Column="Expr1006" />
                                                                  </OutputList>
                                                                  <ComputeScalar>
                                                                    <DefinedValues>
                                                                      <DefinedValue>
                                                                        <ColumnReference Column="Expr1005" />
                                                                        <ScalarOperator ScalarString="NULL">
                                                                          <Const ConstValue="NULL" />
                                                                        </ScalarOperator>
                                                                      </DefinedValue>
                                                                      <DefinedValue>
                                                                        <ColumnReference Column="Expr1006" />
                                                                        <ScalarOperator ScalarString="(0)">
                                                                          <Const ConstValue="(0)" />
                                                                        </ScalarOperator>
                                                                      </DefinedValue>
                                                                    </DefinedValues>
                                                                    <RelOp NodeId="17" PhysicalOp="Table Scan" LogicalOp="Table Scan" EstimateRows="1" EstimateIO="0.003125" EstimateCPU="0.0001581" AvgRowSize="19" EstimatedTotalSubtreeCost="0.0032831" TableCardinality="0" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                                      <OutputList>
                                                                        <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="Id" />
                                                                        <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="MixId" />
                                                                      </OutputList>
                                                                      <TableScan Ordered="0" ForcedIndex="0" ForceScan="0" NoExpandHint="0">
                                                                        <DefinedValues>
                                                                          <DefinedValue>
                                                                            <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="Id" />
                                                                          </DefinedValue>
                                                                          <DefinedValue>
                                                                            <ColumnReference Table="@targetRootTeus" Alias="[rootTeu]" Column="MixId" />
                                                                          </DefinedValue>
                                                                        </DefinedValues>
                                                                        <Object Table="[@targetRootTeus]" Alias="[rootTeu]" />
                                                                      </TableScan>
                                                                    </RelOp>
                                                                  </ComputeScalar>
                                                                </RelOp>
                                                              </ComputeScalar>
                                                            </RelOp>
                                                            <RelOp NodeId="26" PhysicalOp="Assert" LogicalOp="Assert" EstimateRows="178.954" EstimateIO="0" EstimateCPU="1.50321e-005" AvgRowSize="27" EstimatedTotalSubtreeCost="0.266906" Parallel="0" EstimateRebinds="178.954" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                              <OutputList>
                                                                <ColumnReference Column="Expr1051" />
                                                                <ColumnReference Column="Recr1009" />
                                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="Id" />
                                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="MixId" />
                                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                                                <ColumnReference Column="Expr1014" />
                                                              </OutputList>
                                                              <Assert StartupExpression="0">
                                                                <RelOp NodeId="27" PhysicalOp="Nested Loops" LogicalOp="Inner Join" EstimateRows="178.954" EstimateIO="0" EstimateCPU="1.50321e-005" AvgRowSize="27" EstimatedTotalSubtreeCost="0.266906" Parallel="0" EstimateRebinds="178.954" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                                  <OutputList>
                                                                    <ColumnReference Column="Expr1051" />
                                                                    <ColumnReference Column="Recr1009" />
                                                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="Id" />
                                                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="MixId" />
                                                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                                                    <ColumnReference Column="Expr1014" />
                                                                  </OutputList>
                                                                  <NestedLoops Optimized="0">
                                                                    <OuterReferences>
                                                                      <ColumnReference Column="Expr1051" />
                                                                      <ColumnReference Column="Recr1009" />
                                                                      <ColumnReference Column="Recr1010" />
                                                                      <ColumnReference Column="Recr1011" />
                                                                      <ColumnReference Column="Recr1012" />
                                                                      <ColumnReference Column="Recr1013" />
                                                                    </OuterReferences>
                                                                    <RelOp NodeId="28" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="1.78954e-006" AvgRowSize="27" EstimatedTotalSubtreeCost="1.78954e-006" Parallel="0" EstimateRebinds="178.954" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                                      <OutputList>
                                                                        <ColumnReference Column="Expr1051" />
                                                                        <ColumnReference Column="Recr1009" />
                                                                        <ColumnReference Column="Recr1010" />
                                                                        <ColumnReference Column="Recr1011" />
                                                                        <ColumnReference Column="Recr1012" />
                                                                        <ColumnReference Column="Recr1013" />
                                                                      </OutputList>
                                                                      <ComputeScalar>
                                                                        <DefinedValues>
                                                                          <DefinedValue>
                                                                            <ColumnReference Column="Expr1051" />
                                                                            <ScalarOperator ScalarString="[Expr1050]+(1)">
                                                                              <Arithmetic Operation="ADD">
                                                                                <ScalarOperator>
                                                                                  <Identifier>
                                                                                    <ColumnReference Column="Expr1050" />
                                                                                  </Identifier>
                                                                                </ScalarOperator>
                                                                                <ScalarOperator>
                                                                                  <Const ConstValue="(1)" />
                                                                                </ScalarOperator>
                                                                              </Arithmetic>
                                                                            </ScalarOperator>
                                                                          </DefinedValue>
                                                                        </DefinedValues>
                                                                        <RelOp NodeId="29" PhysicalOp="Table Spool" LogicalOp="Lazy Spool" EstimateRows="1" EstimateIO="0" EstimateCPU="1.78954e-006" AvgRowSize="27" EstimatedTotalSubtreeCost="1.78954e-006" Parallel="0" EstimateRebinds="178.954" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                                          <OutputList>
                                                                            <ColumnReference Column="Expr1050" />
                                                                            <ColumnReference Column="Recr1009" />
                                                                            <ColumnReference Column="Recr1010" />
                                                                            <ColumnReference Column="Recr1011" />
                                                                            <ColumnReference Column="Recr1012" />
                                                                            <ColumnReference Column="Recr1013" />
                                                                          </OutputList>
                                                                          <Spool PrimaryNodeId="13" Stack="1" />
                                                                        </RelOp>
                                                                      </ComputeScalar>
                                                                    </RelOp>
                                                                    <RelOp NodeId="33" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="177.954" EstimateIO="0" EstimateCPU="1.77954e-005" AvgRowSize="31" EstimatedTotalSubtreeCost="0.266889" Parallel="0" EstimateRebinds="177.954" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                                      <OutputList>
                                                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="Id" />
                                                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="MixId" />
                                                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                                                        <ColumnReference Column="Expr1014" />
                                                                      </OutputList>
                                                                      <ComputeScalar>
                                                                        <DefinedValues>
                                                                          <DefinedValue>
                                                                            <ColumnReference Column="Expr1014" />
                                                                            <ScalarOperator ScalarString="[Recr1013]+(1)">
                                                                              <Arithmetic Operation="ADD">
                                                                                <ScalarOperator>
                                                                                  <Identifier>
                                                                                    <ColumnReference Column="Recr1013" />
                                                                                  </Identifier>
                                                                                </ScalarOperator>
                                                                                <ScalarOperator>
                                                                                  <Const ConstValue="(1)" />
                                                                                </ScalarOperator>
                                                                              </Arithmetic>
                                                                            </ScalarOperator>
                                                                          </DefinedValue>
                                                                        </DefinedValues>
                                                                        <RelOp NodeId="34" PhysicalOp="Nested Loops" LogicalOp="Inner Join" EstimateRows="177.954" EstimateIO="0" EstimateCPU="0.000743847" AvgRowSize="27" EstimatedTotalSubtreeCost="0.263705" Parallel="0" EstimateRebinds="177.954" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                                          <OutputList>
                                                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="Id" />
                                                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="MixId" />
                                                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                                                          </OutputList>
                                                                          <NestedLoops Optimized="0">
                                                                            <RelOp NodeId="35" PhysicalOp="Filter" LogicalOp="Filter" EstimateRows="1" EstimateIO="0" EstimateCPU="4.8e-007" AvgRowSize="9" EstimatedTotalSubtreeCost="0.000265008" Parallel="0" EstimateRebinds="177.954" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                                              <OutputList />
                                                                              <Filter StartupExpression="1">
                                                                                <RelOp NodeId="36" PhysicalOp="Constant Scan" LogicalOp="Constant Scan" EstimateRows="1" EstimateIO="0" EstimateCPU="1.157e-006" AvgRowSize="9" EstimatedTotalSubtreeCost="0.000179111" Parallel="0" EstimateRebinds="0" EstimateRewinds="177.954" EstimatedExecutionMode="Row">
                                                                                  <OutputList />
                                                                                  <ConstantScan />
                                                                                </RelOp>
                                                                                <Predicate>
                                                                                  <ScalarOperator ScalarString="[Recr1011]=[@mixId]">
                                                                                    <Compare CompareOp="EQ">
                                                                                      <ScalarOperator>
                                                                                        <Identifier>
                                                                                          <ColumnReference Column="Recr1011" />
                                                                                        </Identifier>
                                                                                      </ScalarOperator>
                                                                                      <ScalarOperator>
                                                                                        <Identifier>
                                                                                          <ColumnReference Column="@mixId" />
                                                                                        </Identifier>
                                                                                      </ScalarOperator>
                                                                                    </Compare>
                                                                                  </ScalarOperator>
                                                                                </Predicate>
                                                                              </Filter>
                                                                            </RelOp>
                                                                            <RelOp NodeId="38" PhysicalOp="Index Seek" LogicalOp="Index Seek" EstimateRows="177.954" EstimateIO="0.00386574" EstimateCPU="0.000352749" AvgRowSize="27" EstimatedTotalSubtreeCost="0.130326" TableCardinality="4.12024e+007" Parallel="0" EstimateRebinds="177.954" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                                                              <OutputList>
                                                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="Id" />
                                                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="MixId" />
                                                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                                                              </OutputList>
                                                                              <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                                                                                <DefinedValues>
                                                                                  <DefinedValue>
                                                                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="Id" />
                                                                                  </DefinedValue>
                                                                                  <DefinedValue>
                                                                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="MixId" />
                                                                                  </DefinedValue>
                                                                                  <DefinedValue>
                                                                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                                                                  </DefinedValue>
                                                                                </DefinedValues>
                                                                                <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_IDX_Mix]" Alias="[rerunTeu]" IndexKind="NonClustered" />
                                                                                <SeekPredicates>
                                                                                  <SeekPredicateNew>
                                                                                    <SeekKeys>
                                                                                      <Prefix ScanType="EQ">
                                                                                        <RangeColumns>
                                                                                          <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="MixId" />
                                                                                          <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[rerunTeu]" Column="RerunSourceId" />
                                                                                        </RangeColumns>
                                                                                        <RangeExpressions>
                                                                                          <ScalarOperator ScalarString="[@mixId]">
                                                                                            <Identifier>
                                                                                              <ColumnReference Column="@mixId" />
                                                                                            </Identifier>
                                                                                          </ScalarOperator>
                                                                                          <ScalarOperator ScalarString="[Recr1010]">
                                                                                            <Identifier>
                                                                                              <ColumnReference Column="Recr1010" />
                                                                                            </Identifier>
                                                                                          </ScalarOperator>
                                                                                        </RangeExpressions>
                                                                                      </Prefix>
                                                                                    </SeekKeys>
                                                                                  </SeekPredicateNew>
                                                                                </SeekPredicates>
                                                                              </IndexScan>
                                                                            </RelOp>
                                                                          </NestedLoops>
                                                                        </RelOp>
                                                                      </ComputeScalar>
                                                                    </RelOp>
                                                                  </NestedLoops>
                                                                </RelOp>
                                                                <Predicate>
                                                                  <ScalarOperator ScalarString="CASE WHEN [Expr1051]&gt;(100) THEN (0) ELSE NULL END">
                                                                    <IF>
                                                                      <Condition>
                                                                        <ScalarOperator>
                                                                          <Compare CompareOp="GT">
                                                                            <ScalarOperator>
                                                                              <Identifier>
                                                                                <ColumnReference Column="Expr1051" />
                                                                              </Identifier>
                                                                            </ScalarOperator>
                                                                            <ScalarOperator>
                                                                              <Const ConstValue="(100)" />
                                                                            </ScalarOperator>
                                                                          </Compare>
                                                                        </ScalarOperator>
                                                                      </Condition>
                                                                      <Then>
                                                                        <ScalarOperator>
                                                                          <Const ConstValue="(0)" />
                                                                        </ScalarOperator>
                                                                      </Then>
                                                                      <Else>
                                                                        <ScalarOperator>
                                                                          <Const ConstValue="NULL" />
                                                                        </ScalarOperator>
                                                                      </Else>
                                                                    </IF>
                                                                  </ScalarOperator>
                                                                </Predicate>
                                                              </Assert>
                                                            </RelOp>
                                                          </Concat>
                                                        </RelOp>
                                                      </Spool>
                                                    </RelOp>
                                                  </Sort>
                                                </RelOp>
                                              </Segment>
                                            </RelOp>
                                          </Segment>
                                        </RelOp>
                                      </SequenceProject>
                                    </RelOp>
                                    <RelOp NodeId="46" PhysicalOp="Clustered Index Seek" LogicalOp="Clustered Index Seek" EstimateRows="1" EstimateIO="0.003125" EstimateCPU="0.0001581" AvgRowSize="24" EstimatedTotalSubtreeCost="0.309804" TableCardinality="4.12024e+007" Parallel="0" EstimateRebinds="176.967" EstimateRewinds="0.986517" EstimatedExecutionMode="Row">
                                      <OutputList>
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="Id" />
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="IsRerunPrimary" />
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="RecordLastUpdated" />
                                      </OutputList>
                                      <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                                        <DefinedValues>
                                          <DefinedValue>
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="Id" />
                                          </DefinedValue>
                                          <DefinedValue>
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="IsRerunPrimary" />
                                          </DefinedValue>
                                          <DefinedValue>
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="RecordLastUpdated" />
                                          </DefinedValue>
                                        </DefinedValues>
                                        <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_PK]" Alias="[T]" IndexKind="Clustered" />
                                        <SeekPredicates>
                                          <SeekPredicateNew>
                                            <SeekKeys>
                                              <Prefix ScanType="EQ">
                                                <RangeColumns>
                                                  <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="Id" />
                                                </RangeColumns>
                                                <RangeExpressions>
                                                  <ScalarOperator ScalarString="[Recr1016]">
                                                    <Identifier>
                                                      <ColumnReference Column="Recr1016" />
                                                    </Identifier>
                                                  </ScalarOperator>
                                                </RangeExpressions>
                                              </Prefix>
                                            </SeekKeys>
                                          </SeekPredicateNew>
                                        </SeekPredicates>
                                        <Predicate>
                                          <ScalarOperator ScalarString="[OurLabReporting].[dbo].[TEU].[IsRerunPrimary] as [T].[IsRerunPrimary]&lt;&gt;CASE WHEN [Expr1020]=(1) THEN (1) ELSE (0) END">
                                            <Compare CompareOp="NE">
                                              <ScalarOperator>
                                                <Identifier>
                                                  <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Alias="[T]" Column="IsRerunPrimary" />
                                                </Identifier>
                                              </ScalarOperator>
                                              <ScalarOperator>
                                                <IF>
                                                  <Condition>
                                                    <ScalarOperator>
                                                      <Compare CompareOp="EQ">
                                                        <ScalarOperator>
                                                          <Identifier>
                                                            <ColumnReference Column="Expr1020" />
                                                          </Identifier>
                                                        </ScalarOperator>
                                                        <ScalarOperator>
                                                          <Const ConstValue="(1)" />
                                                        </ScalarOperator>
                                                      </Compare>
                                                    </ScalarOperator>
                                                  </Condition>
                                                  <Then>
                                                    <ScalarOperator>
                                                      <Const ConstValue="(1)" />
                                                    </ScalarOperator>
                                                  </Then>
                                                  <Else>
                                                    <ScalarOperator>
                                                      <Const ConstValue="(0)" />
                                                    </ScalarOperator>
                                                  </Else>
                                                </IF>
                                              </ScalarOperator>
                                            </Compare>
                                          </ScalarOperator>
                                        </Predicate>
                                      </IndexScan>
                                    </RelOp>
                                  </NestedLoops>
                                </RelOp>
                              </Sort>
                            </RelOp>
                          </ComputeScalar>
                        </RelOp>
                      </ComputeScalar>
                    </RelOp>
                  </ComputeScalar>
                </RelOp>
              </Update>
            </RelOp>
          </QueryPlan>
        </StmtSimple>
        <StmtSimple StatementText=" UPDATE T&#xD;&#xA;        SET &#xD;&#xA;            -- Set aggregated TEU status counts.&#xD;&#xA;            T.TEUsCancelled       = S.TEUsCancelled&#xD;&#xA;            ,T.TEUsFailed         = S.TEUsFailed&#xD;&#xA;            ,T.TEUsCompleted      = S.TEUsCompleted&#xD;&#xA;            ,T.TEUsWaiting        = S.TEUsWaiting&#xD;&#xA;            ,T.TEUsInProgress     = S.TEUsInProgress&#xD;&#xA;            ,T.TEUsNotScheduled   = S.TEUsNotScheduled&#xD;&#xA;            ,T.TotalTEUs          = S.TotalTEUs&#xD;&#xA;&#xD;&#xA;            -- Set aggregated TEU test outcome counts.&#xD;&#xA;            ,T.PassTotal          = O.PassCount&#xD;&#xA;            ,T.FailTotal          = O.FailCount&#xD;&#xA;            ,T.WarnTotal          = O.WarnCount&#xD;&#xA;            ,T.SkipTotal          = O.SkipCount&#xD;&#xA;            ,T.BlockTotal         = O.BlockCount&#xD;&#xA;            ,T.TotalUploadCompleteTEUs = O.UploadCompleteCount&#xD;&#xA;        FROM dbo.TEUCountsByResolvedTED AS T&#xD;&#xA;        INNER JOIN dbo.Function_GetTeuCountsByTed&#xD;&#xA;        (&#xD;&#xA;            1, &#xD;&#xA;            @resolvedTedId, &#xD;&#xA;            NULL, &#xD;&#xA;            NULL, &#xD;&#xA;            NULL, &#xD;&#xA;            NULL, &#xD;&#xA;            NULL&#xD;&#xA;        ) AS S ON S.ResolvedTedId = T.ResolvedTEDId&#xD;&#xA;        INNER JOIN&#xD;&#xA;        (&#xD;&#xA;            -- Summarize test outcomes of TEUs.&#xD;&#xA;            SELECT &#xD;&#xA;                P.ResolvedTEDId&#xD;&#xA;                ,SUM(ISNULL(P.TCPassCount, 0)) AS PassCount&#xD;&#xA;                ,SUM(ISNULL(P.TCFailCount, 0)) AS FailCount&#xD;&#xA;                ,SUM(ISNULL(P.TCWarnCount, 0)) AS WarnCount&#xD;&#xA;                ,SUM(ISNULL(P.TCSkipCount, 0)) AS SkipCount&#xD;&#xA;                ,SUM(ISNULL(P.TCBlockCount, 0)) AS BlockCount&#xD;&#xA;                ,SUM(CASE WHEN UploadComplete = 1 THEN 1 ELSE 0 END) AS UploadCompleteCount&#xD;&#xA;            FROM dbo.View_PrimaryTeu AS P&#xD;&#xA;            WHERE P.ResolvedTEDId = @resolvedTedId&#xD;&#xA;            GROUP BY P.ResolvedTEDId&#xD;&#xA;        ) AS O ON O.ResolvedTEDId = T.ResolvedTEDId&#xD;&#xA;        WHERE T.ResolvedTEDId = @resolvedTedId;&#xD;&#xA;&#xD;&#xA;   " StatementId="18" StatementCompId="26" StatementType="UPDATE" RetrievedFromCache="true" StatementSubTreeCost="0.0619107" StatementEstRows="1" StatementOptmLevel="FULL" QueryHash="0x7D05DFCF2B3A32A0" QueryPlanHash="0x864F91D28A4A8FC2" StatementOptmEarlyAbortReason="GoodEnoughPlanFound">
          <StatementSetOptions QUOTED_IDENTIFIER="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" NUMERIC_ROUNDABORT="false" />
          <QueryPlan NonParallelPlanReason="MaxDOPSetToOne" CachedPlanSize="80" CompileTime="9" CompileCPU="9" CompileMemory="1320">
            <MissingIndexes>
              <MissingIndexGroup Impact="52.6181">
                <MissingIndex Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]">
                  <ColumnGroup Usage="EQUALITY">
                    <Column Name="[ResolvedTEDId]" ColumnId="3" />
                    <Column Name="[IsRerunPrimary]" ColumnId="33" />
                  </ColumnGroup>
                  <ColumnGroup Usage="INCLUDE">
                    <Column Name="[UploadComplete]" ColumnId="14" />
                    <Column Name="[TCPassCount]" ColumnId="16" />
                    <Column Name="[TCFailCount]" ColumnId="17" />
                    <Column Name="[TCWarnCount]" ColumnId="18" />
                    <Column Name="[TCSkipCount]" ColumnId="19" />
                    <Column Name="[TCBlockCount]" ColumnId="20" />
                  </ColumnGroup>
                </MissingIndex>
              </MissingIndexGroup>
            </MissingIndexes>
            <MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0" />
            <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="193313" EstimatedPagesCached="773254" EstimatedAvailableDegreeOfParallelism="1" />
            <RelOp NodeId="0" PhysicalOp="Sequence" LogicalOp="Sequence" EstimateRows="1" EstimateIO="0" EstimateCPU="2e-006" AvgRowSize="9" EstimatedTotalSubtreeCost="0.0619107" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
              <OutputList />
              <Sequence>
                <RelOp NodeId="1" PhysicalOp="Table-valued function" LogicalOp="Table-valued function" EstimateRows="1" EstimateIO="0" EstimateCPU="1.157e-006" AvgRowSize="9" EstimatedTotalSubtreeCost="1.157e-006" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                  <OutputList />
                  <TableValuedFunction>
                    <DefinedValues />
                    <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Index="[PK__Function__64F77D3279B10A63]" Alias="[S]" />
                    <ParameterList>
                      <ScalarOperator ScalarString="(1)">
                        <Const ConstValue="(1)" />
                      </ScalarOperator>
                      <ScalarOperator ScalarString="[@resolvedTedId]">
                        <Identifier>
                          <ColumnReference Column="@resolvedTedId" />
                        </Identifier>
                      </ScalarOperator>
                      <ScalarOperator ScalarString="NULL">
                        <Const ConstValue="NULL" />
                      </ScalarOperator>
                      <ScalarOperator ScalarString="NULL">
                        <Const ConstValue="NULL" />
                      </ScalarOperator>
                      <ScalarOperator ScalarString="NULL">
                        <Const ConstValue="NULL" />
                      </ScalarOperator>
                      <ScalarOperator ScalarString="NULL">
                        <Const ConstValue="NULL" />
                      </ScalarOperator>
                      <ScalarOperator ScalarString="NULL">
                        <Const ConstValue="NULL" />
                      </ScalarOperator>
                    </ParameterList>
                  </TableValuedFunction>
                </RelOp>
                <RelOp NodeId="10" PhysicalOp="Clustered Index Update" LogicalOp="Update" EstimateRows="1" EstimateIO="0.01" EstimateCPU="1e-006" AvgRowSize="9" EstimatedTotalSubtreeCost="0.0619075" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                  <OutputList />
                  <Update DMLRequestSort="0">
                    <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Index="[TEUCountsByResolvedTED_PK]" Alias="[T]" IndexKind="Clustered" />
                    <SetPredicate>
                      <ScalarOperator ScalarString="[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[TEUsCancelled] as [T].[TEUsCancelled] = [OurLabReporting].[dbo].[Function_GetTeuCountsByTed].[TEUsCancelled] as [S].[TEUsCancelled],[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[TEUsFailed] as [T].[TEUsFailed] = [OurLabReporting].[dbo].[Function_GetTeuCountsByTed].[TEUsFailed] as [S].[TEUsFailed],[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[TEUsCompleted] as [T].[TEUsCompleted] = [OurLabReporting].[dbo].[Function_GetTeuCountsByTed].[TEUsCompleted] as [S].[TEUsCompleted],[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[TEUsWaiting] as [T].[TEUsWaiting] = [OurLabReporting].[dbo].[Function_GetTeuCountsByTed].[TEUsWaiting] as [S].[TEUsWaiting],[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[TEUsInProgress] as [T].[TEUsInProgress] = [OurLabReporting].[dbo].[Function_GetTeuCountsByTed].[TEUsInProgress] as [S].[TEUsInProgress],[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[TEUsNotScheduled] as [T].[TEUsNotScheduled] = [OurLabReporting].[dbo].[Function_GetTeuCountsByTed].[TEUsNotScheduled] as [S].[TEUsNotScheduled],[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[TotalTEUs] as [T].[TotalTEUs] = [OurLabReporting].[dbo].[Function_GetTeuCountsByTed].[TotalTEUs] as [S].[TotalTEUs],[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[PassTotal] as [T].[PassTotal] = RaiseIfNullUpdate([Expr1006]),[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[FailTotal] as [T].[FailTotal] = RaiseIfNullUpdate([Expr1007]),[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[WarnTotal] as [T].[WarnTotal] = RaiseIfNullUpdate([Expr1008]),[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[SkipTotal] as [T].[SkipTotal] = RaiseIfNullUpdate([Expr1009]),[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[BlockTotal] as [T].[BlockTotal] = RaiseIfNullUpdate([Expr1010]),[OurLabReporting].[dbo].[TEUCountsByResolvedTED].[TotalUploadCompleteTEUs] as [T].[TotalUploadCompleteTEUs] = RaiseIfNullUpdate([Expr1011])">
                        <ScalarExpressionList>
                          <ScalarOperator>
                            <MultipleAssign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="TEUsCancelled" />
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsCancelled" />
                                  </Identifier>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="TEUsFailed" />
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsFailed" />
                                  </Identifier>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="TEUsCompleted" />
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsCompleted" />
                                  </Identifier>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="TEUsWaiting" />
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsWaiting" />
                                  </Identifier>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="TEUsInProgress" />
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsInProgress" />
                                  </Identifier>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="TEUsNotScheduled" />
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsNotScheduled" />
                                  </Identifier>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="TotalTEUs" />
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TotalTEUs" />
                                  </Identifier>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="PassTotal" />
                                <ScalarOperator>
                                  <Intrinsic FunctionName="RaiseIfNullUpdate">
                                    <ScalarOperator>
                                      <Identifier>
                                        <ColumnReference Column="Expr1006" />
                                      </Identifier>
                                    </ScalarOperator>
                                  </Intrinsic>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="FailTotal" />
                                <ScalarOperator>
                                  <Intrinsic FunctionName="RaiseIfNullUpdate">
                                    <ScalarOperator>
                                      <Identifier>
                                        <ColumnReference Column="Expr1007" />
                                      </Identifier>
                                    </ScalarOperator>
                                  </Intrinsic>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="WarnTotal" />
                                <ScalarOperator>
                                  <Intrinsic FunctionName="RaiseIfNullUpdate">
                                    <ScalarOperator>
                                      <Identifier>
                                        <ColumnReference Column="Expr1008" />
                                      </Identifier>
                                    </ScalarOperator>
                                  </Intrinsic>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="SkipTotal" />
                                <ScalarOperator>
                                  <Intrinsic FunctionName="RaiseIfNullUpdate">
                                    <ScalarOperator>
                                      <Identifier>
                                        <ColumnReference Column="Expr1009" />
                                      </Identifier>
                                    </ScalarOperator>
                                  </Intrinsic>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="BlockTotal" />
                                <ScalarOperator>
                                  <Intrinsic FunctionName="RaiseIfNullUpdate">
                                    <ScalarOperator>
                                      <Identifier>
                                        <ColumnReference Column="Expr1010" />
                                      </Identifier>
                                    </ScalarOperator>
                                  </Intrinsic>
                                </ScalarOperator>
                              </Assign>
                              <Assign>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="TotalUploadCompleteTEUs" />
                                <ScalarOperator>
                                  <Intrinsic FunctionName="RaiseIfNullUpdate">
                                    <ScalarOperator>
                                      <Identifier>
                                        <ColumnReference Column="Expr1011" />
                                      </Identifier>
                                    </ScalarOperator>
                                  </Intrinsic>
                                </ScalarOperator>
                              </Assign>
                            </MultipleAssign>
                          </ScalarOperator>
                        </ScalarExpressionList>
                      </ScalarOperator>
                    </SetPredicate>
                    <RelOp NodeId="11" PhysicalOp="Nested Loops" LogicalOp="Inner Join" EstimateRows="1" EstimateIO="0" EstimateCPU="4.18e-006" AvgRowSize="64" EstimatedTotalSubtreeCost="0.0519065" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                      <OutputList>
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="ResolvedTEDId" />
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsCancelled" />
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsFailed" />
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsCompleted" />
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsWaiting" />
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsInProgress" />
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsNotScheduled" />
                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TotalTEUs" />
                        <ColumnReference Column="Expr1006" />
                        <ColumnReference Column="Expr1007" />
                        <ColumnReference Column="Expr1008" />
                        <ColumnReference Column="Expr1009" />
                        <ColumnReference Column="Expr1010" />
                        <ColumnReference Column="Expr1011" />
                      </OutputList>
                      <NestedLoops Optimized="0">
                        <RelOp NodeId="12" PhysicalOp="Clustered Index Seek" LogicalOp="Clustered Index Seek" EstimateRows="1" EstimateIO="0.003125" EstimateCPU="0.0001581" AvgRowSize="35" EstimatedTotalSubtreeCost="0.0032831" TableCardinality="0" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                          <OutputList>
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsCancelled" />
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsFailed" />
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsCompleted" />
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsWaiting" />
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsInProgress" />
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsNotScheduled" />
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TotalTEUs" />
                          </OutputList>
                          <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                            <DefinedValues>
                              <DefinedValue>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsCancelled" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsFailed" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsCompleted" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsWaiting" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsInProgress" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TEUsNotScheduled" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="TotalTEUs" />
                              </DefinedValue>
                            </DefinedValues>
                            <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Index="[PK__Function__64F77D3279B10A63]" Alias="[S]" />
                            <SeekPredicates>
                              <SeekPredicateNew>
                                <SeekKeys>
                                  <Prefix ScanType="EQ">
                                    <RangeColumns>
                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[Function_GetTeuCountsByTed]" Alias="[S]" Column="ResolvedTedId" />
                                    </RangeColumns>
                                    <RangeExpressions>
                                      <ScalarOperator ScalarString="[@resolvedTedId]">
                                        <Identifier>
                                          <ColumnReference Column="@resolvedTedId" />
                                        </Identifier>
                                      </ScalarOperator>
                                    </RangeExpressions>
                                  </Prefix>
                                </SeekKeys>
                              </SeekPredicateNew>
                            </SeekPredicates>
                          </IndexScan>
                        </RelOp>
                        <RelOp NodeId="13" PhysicalOp="Nested Loops" LogicalOp="Inner Join" EstimateRows="1" EstimateIO="0" EstimateCPU="4.18e-006" AvgRowSize="35" EstimatedTotalSubtreeCost="0.0486192" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                          <OutputList>
                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="ResolvedTEDId" />
                            <ColumnReference Column="Expr1006" />
                            <ColumnReference Column="Expr1007" />
                            <ColumnReference Column="Expr1008" />
                            <ColumnReference Column="Expr1009" />
                            <ColumnReference Column="Expr1010" />
                            <ColumnReference Column="Expr1011" />
                          </OutputList>
                          <NestedLoops Optimized="0">
                            <RelOp NodeId="14" PhysicalOp="Clustered Index Seek" LogicalOp="Clustered Index Seek" EstimateRows="1" EstimateIO="0.003125" EstimateCPU="0.0001581" AvgRowSize="11" EstimatedTotalSubtreeCost="0.0032831" TableCardinality="1.37084e+006" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                              <OutputList>
                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="ResolvedTEDId" />
                              </OutputList>
                              <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                                <DefinedValues>
                                  <DefinedValue>
                                    <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="ResolvedTEDId" />
                                  </DefinedValue>
                                </DefinedValues>
                                <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Index="[TEUCountsByResolvedTED_PK]" Alias="[T]" IndexKind="Clustered" />
                                <SeekPredicates>
                                  <SeekPredicateNew>
                                    <SeekKeys>
                                      <Prefix ScanType="EQ">
                                        <RangeColumns>
                                          <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEUCountsByResolvedTED]" Alias="[T]" Column="ResolvedTEDId" />
                                        </RangeColumns>
                                        <RangeExpressions>
                                          <ScalarOperator ScalarString="[@resolvedTedId]">
                                            <Identifier>
                                              <ColumnReference Column="@resolvedTedId" />
                                            </Identifier>
                                          </ScalarOperator>
                                        </RangeExpressions>
                                      </Prefix>
                                    </SeekKeys>
                                  </SeekPredicateNew>
                                </SeekPredicates>
                              </IndexScan>
                            </RelOp>
                            <RelOp NodeId="15" PhysicalOp="Stream Aggregate" LogicalOp="Aggregate" EstimateRows="1" EstimateIO="0" EstimateCPU="1.1e-006" AvgRowSize="31" EstimatedTotalSubtreeCost="0.045332" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                              <OutputList>
                                <ColumnReference Column="Expr1006" />
                                <ColumnReference Column="Expr1007" />
                                <ColumnReference Column="Expr1008" />
                                <ColumnReference Column="Expr1009" />
                                <ColumnReference Column="Expr1010" />
                                <ColumnReference Column="Expr1011" />
                              </OutputList>
                              <StreamAggregate>
                                <DefinedValues>
                                  <DefinedValue>
                                    <ColumnReference Column="Expr1006" />
                                    <ScalarOperator ScalarString="SUM([Expr1053])">
                                      <Aggregate Distinct="0" AggType="SUM">
                                        <ScalarOperator>
                                          <Identifier>
                                            <ColumnReference Column="Expr1053" />
                                          </Identifier>
                                        </ScalarOperator>
                                      </Aggregate>
                                    </ScalarOperator>
                                  </DefinedValue>
                                  <DefinedValue>
                                    <ColumnReference Column="Expr1007" />
                                    <ScalarOperator ScalarString="SUM([Expr1054])">
                                      <Aggregate Distinct="0" AggType="SUM">
                                        <ScalarOperator>
                                          <Identifier>
                                            <ColumnReference Column="Expr1054" />
                                          </Identifier>
                                        </ScalarOperator>
                                      </Aggregate>
                                    </ScalarOperator>
                                  </DefinedValue>
                                  <DefinedValue>
                                    <ColumnReference Column="Expr1008" />
                                    <ScalarOperator ScalarString="SUM([Expr1055])">
                                      <Aggregate Distinct="0" AggType="SUM">
                                        <ScalarOperator>
                                          <Identifier>
                                            <ColumnReference Column="Expr1055" />
                                          </Identifier>
                                        </ScalarOperator>
                                      </Aggregate>
                                    </ScalarOperator>
                                  </DefinedValue>
                                  <DefinedValue>
                                    <ColumnReference Column="Expr1009" />
                                    <ScalarOperator ScalarString="SUM([Expr1056])">
                                      <Aggregate Distinct="0" AggType="SUM">
                                        <ScalarOperator>
                                          <Identifier>
                                            <ColumnReference Column="Expr1056" />
                                          </Identifier>
                                        </ScalarOperator>
                                      </Aggregate>
                                    </ScalarOperator>
                                  </DefinedValue>
                                  <DefinedValue>
                                    <ColumnReference Column="Expr1010" />
                                    <ScalarOperator ScalarString="SUM([Expr1057])">
                                      <Aggregate Distinct="0" AggType="SUM">
                                        <ScalarOperator>
                                          <Identifier>
                                            <ColumnReference Column="Expr1057" />
                                          </Identifier>
                                        </ScalarOperator>
                                      </Aggregate>
                                    </ScalarOperator>
                                  </DefinedValue>
                                  <DefinedValue>
                                    <ColumnReference Column="Expr1011" />
                                    <ScalarOperator ScalarString="SUM([Expr1058])">
                                      <Aggregate Distinct="0" AggType="SUM">
                                        <ScalarOperator>
                                          <Identifier>
                                            <ColumnReference Column="Expr1058" />
                                          </Identifier>
                                        </ScalarOperator>
                                      </Aggregate>
                                    </ScalarOperator>
                                  </DefinedValue>
                                </DefinedValues>
                                <RelOp NodeId="16" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="1e-007" AvgRowSize="31" EstimatedTotalSubtreeCost="0.0453309" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                  <OutputList>
                                    <ColumnReference Column="Expr1053" />
                                    <ColumnReference Column="Expr1054" />
                                    <ColumnReference Column="Expr1055" />
                                    <ColumnReference Column="Expr1056" />
                                    <ColumnReference Column="Expr1057" />
                                    <ColumnReference Column="Expr1058" />
                                  </OutputList>
                                  <ComputeScalar>
                                    <DefinedValues>
                                      <DefinedValue>
                                        <ColumnReference Column="Expr1053" />
                                        <ScalarOperator ScalarString="isnull([OurLabReporting].[dbo].[TEU].[TCPassCount],(0))">
                                          <Intrinsic FunctionName="isnull">
                                            <ScalarOperator>
                                              <Identifier>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCPassCount" />
                                              </Identifier>
                                            </ScalarOperator>
                                            <ScalarOperator>
                                              <Const ConstValue="(0)" />
                                            </ScalarOperator>
                                          </Intrinsic>
                                        </ScalarOperator>
                                      </DefinedValue>
                                      <DefinedValue>
                                        <ColumnReference Column="Expr1054" />
                                        <ScalarOperator ScalarString="isnull([OurLabReporting].[dbo].[TEU].[TCFailCount],(0))">
                                          <Intrinsic FunctionName="isnull">
                                            <ScalarOperator>
                                              <Identifier>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCFailCount" />
                                              </Identifier>
                                            </ScalarOperator>
                                            <ScalarOperator>
                                              <Const ConstValue="(0)" />
                                            </ScalarOperator>
                                          </Intrinsic>
                                        </ScalarOperator>
                                      </DefinedValue>
                                      <DefinedValue>
                                        <ColumnReference Column="Expr1055" />
                                        <ScalarOperator ScalarString="isnull([OurLabReporting].[dbo].[TEU].[TCWarnCount],(0))">
                                          <Intrinsic FunctionName="isnull">
                                            <ScalarOperator>
                                              <Identifier>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCWarnCount" />
                                              </Identifier>
                                            </ScalarOperator>
                                            <ScalarOperator>
                                              <Const ConstValue="(0)" />
                                            </ScalarOperator>
                                          </Intrinsic>
                                        </ScalarOperator>
                                      </DefinedValue>
                                      <DefinedValue>
                                        <ColumnReference Column="Expr1056" />
                                        <ScalarOperator ScalarString="isnull([OurLabReporting].[dbo].[TEU].[TCSkipCount],(0))">
                                          <Intrinsic FunctionName="isnull">
                                            <ScalarOperator>
                                              <Identifier>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCSkipCount" />
                                              </Identifier>
                                            </ScalarOperator>
                                            <ScalarOperator>
                                              <Const ConstValue="(0)" />
                                            </ScalarOperator>
                                          </Intrinsic>
                                        </ScalarOperator>
                                      </DefinedValue>
                                      <DefinedValue>
                                        <ColumnReference Column="Expr1057" />
                                        <ScalarOperator ScalarString="isnull([OurLabReporting].[dbo].[TEU].[TCBlockCount],(0))">
                                          <Intrinsic FunctionName="isnull">
                                            <ScalarOperator>
                                              <Identifier>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCBlockCount" />
                                              </Identifier>
                                            </ScalarOperator>
                                            <ScalarOperator>
                                              <Const ConstValue="(0)" />
                                            </ScalarOperator>
                                          </Intrinsic>
                                        </ScalarOperator>
                                      </DefinedValue>
                                      <DefinedValue>
                                        <ColumnReference Column="Expr1058" />
                                        <ScalarOperator ScalarString="CASE WHEN [OurLabReporting].[dbo].[TEU].[UploadComplete]=(1) THEN (1) ELSE (0) END">
                                          <IF>
                                            <Condition>
                                              <ScalarOperator>
                                                <Compare CompareOp="EQ">
                                                  <ScalarOperator>
                                                    <Identifier>
                                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="UploadComplete" />
                                                    </Identifier>
                                                  </ScalarOperator>
                                                  <ScalarOperator>
                                                    <Const ConstValue="(1)" />
                                                  </ScalarOperator>
                                                </Compare>
                                              </ScalarOperator>
                                            </Condition>
                                            <Then>
                                              <ScalarOperator>
                                                <Const ConstValue="(1)" />
                                              </ScalarOperator>
                                            </Then>
                                            <Else>
                                              <ScalarOperator>
                                                <Const ConstValue="(0)" />
                                              </ScalarOperator>
                                            </Else>
                                          </IF>
                                        </ScalarOperator>
                                      </DefinedValue>
                                    </DefinedValues>
                                    <RelOp NodeId="17" PhysicalOp="Nested Loops" LogicalOp="Inner Join" EstimateRows="1" EstimateIO="0" EstimateCPU="4.18e-006" AvgRowSize="28" EstimatedTotalSubtreeCost="0.0453308" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                      <OutputList>
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="UploadComplete" />
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCPassCount" />
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCFailCount" />
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCWarnCount" />
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCSkipCount" />
                                        <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCBlockCount" />
                                      </OutputList>
                                      <NestedLoops Optimized="0">
                                        <OuterReferences>
                                          <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="Id" />
                                        </OuterReferences>
                                        <RelOp NodeId="18" PhysicalOp="Index Seek" LogicalOp="Index Seek" EstimateRows="1" EstimateIO="0.0379069" EstimateCPU="0.00292761" AvgRowSize="20" EstimatedTotalSubtreeCost="0.0408345" TableCardinality="4.12024e+007" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                          <OutputList>
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="Id" />
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="UploadComplete" />
                                          </OutputList>
                                          <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                                            <DefinedValues>
                                              <DefinedValue>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="Id" />
                                              </DefinedValue>
                                              <DefinedValue>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="UploadComplete" />
                                              </DefinedValue>
                                            </DefinedValues>
                                            <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_IDX_ResolvedTED]" IndexKind="NonClustered" />
                                            <SeekPredicates>
                                              <SeekPredicateNew>
                                                <SeekKeys>
                                                  <Prefix ScanType="EQ">
                                                    <RangeColumns>
                                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="ResolvedTEDId" />
                                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="IsRerunPrimary" />
                                                    </RangeColumns>
                                                    <RangeExpressions>
                                                      <ScalarOperator ScalarString="[@resolvedTedId]">
                                                        <Identifier>
                                                          <ColumnReference Column="@resolvedTedId" />
                                                        </Identifier>
                                                      </ScalarOperator>
                                                      <ScalarOperator ScalarString="(1)">
                                                        <Const ConstValue="(1)" />
                                                      </ScalarOperator>
                                                    </RangeExpressions>
                                                  </Prefix>
                                                </SeekKeys>
                                              </SeekPredicateNew>
                                            </SeekPredicates>
                                            <Predicate>
                                              <ScalarOperator ScalarString="[OurLabReporting].[dbo].[TEU].[ResolvedTEDId]=[@resolvedTedId]">
                                                <Compare CompareOp="EQ">
                                                  <ScalarOperator>
                                                    <Identifier>
                                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="ResolvedTEDId" />
                                                    </Identifier>
                                                  </ScalarOperator>
                                                  <ScalarOperator>
                                                    <Identifier>
                                                      <ColumnReference Column="@resolvedTedId" />
                                                    </Identifier>
                                                  </ScalarOperator>
                                                </Compare>
                                              </ScalarOperator>
                                            </Predicate>
                                          </IndexScan>
                                        </RelOp>
                                        <RelOp NodeId="20" PhysicalOp="Clustered Index Seek" LogicalOp="Clustered Index Seek" EstimateRows="1" EstimateIO="0.003125" EstimateCPU="0.0001581" AvgRowSize="27" EstimatedTotalSubtreeCost="0.0032831" TableCardinality="4.12024e+007" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                                          <OutputList>
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCPassCount" />
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCFailCount" />
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCWarnCount" />
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCSkipCount" />
                                            <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCBlockCount" />
                                          </OutputList>
                                          <IndexScan Lookup="1" Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                                            <DefinedValues>
                                              <DefinedValue>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCPassCount" />
                                              </DefinedValue>
                                              <DefinedValue>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCFailCount" />
                                              </DefinedValue>
                                              <DefinedValue>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCWarnCount" />
                                              </DefinedValue>
                                              <DefinedValue>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCSkipCount" />
                                              </DefinedValue>
                                              <DefinedValue>
                                                <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="TCBlockCount" />
                                              </DefinedValue>
                                            </DefinedValues>
                                            <Object Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Index="[Teu_PK]" TableReferenceId="-1" IndexKind="Clustered" />
                                            <SeekPredicates>
                                              <SeekPredicateNew>
                                                <SeekKeys>
                                                  <Prefix ScanType="EQ">
                                                    <RangeColumns>
                                                      <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="Id" />
                                                    </RangeColumns>
                                                    <RangeExpressions>
                                                      <ScalarOperator ScalarString="[OurLabReporting].[dbo].[TEU].[Id]">
                                                        <Identifier>
                                                          <ColumnReference Database="[OurLabReporting]" Schema="[dbo]" Table="[TEU]" Column="Id" />
                                                        </Identifier>
                                                      </ScalarOperator>
                                                    </RangeExpressions>
                                                  </Prefix>
                                                </SeekKeys>
                                              </SeekPredicateNew>
                                            </SeekPredicates>
                                          </IndexScan>
                                        </RelOp>
                                      </NestedLoops>
                                    </RelOp>
                                  </ComputeScalar>
                                </RelOp>
                              </StreamAggregate>
                            </RelOp>
                          </NestedLoops>
                        </RelOp>
                      </NestedLoops>
                    </RelOp>
                  </Update>
                </RelOp>
              </Sequence>
            </RelOp>
          </QueryPlan>
        </StmtSimple>
        <StmtCond StatementText=" IF @@TRANCOUNT &gt; 0 AND @DoTran = 1" StatementId="19" StatementCompId="27" StatementType="COND" RetrievedFromCache="true">
          <Condition />
          <Then>
            <Statements>
              <StmtSimple StatementText=" COMMIT TRAN&#xD;&#xA;&#xD;&#xA;   " StatementId="20" StatementCompId="28" StatementType="COMMIT TRANSACTION" RetrievedFromCache="true" />
            </Statements>
          </Then>
        </StmtCond>
        <StmtSimple StatementText=" GOTO ProcExit;&#xD;&#xA;&#xD;" StatementId="21" StatementCompId="30" StatementType="GOTO" RetrievedFromCache="true" />
        <StmtCond StatementText="&#xA;ProcErrorExit:&#xD;&#xA;    IF @returnStatus IS NULL" StatementId="22" StatementCompId="32" StatementType="COND" RetrievedFromCache="true">
          <Condition />
          <Then>
            <Statements>
              <StmtSimple StatementText=" SET @returnStatus = 1;&#xD;&#xA;&#xD;" StatementId="23" StatementCompId="33" StatementType="ASSIGN" RetrievedFromCache="true" />
            </Statements>
          </Then>
        </StmtCond>
        <StmtCond StatementText="&#xA;ProcExit:&#xD;&#xA;    IF @returnStatus IS NULL" StatementId="24" StatementCompId="36" StatementType="COND" RetrievedFromCache="true">
          <Condition />
          <Then>
            <Statements>
              <StmtSimple StatementText=" SET @returnStatus = 0;&#xD;&#xA;&#xD;&#xA;   " StatementId="25" StatementCompId="37" StatementType="ASSIGN" RetrievedFromCache="true" />
            </Statements>
          </Then>
        </StmtCond>
        <StmtSimple StatementText=" DECLARE @objectName varchar(128) = (SELECT OBJECT_NAME(@@PROCID));&#xD;&#xA;   " StatementId="26" StatementCompId="39" StatementType="SELECT" RetrievedFromCache="true" StatementSubTreeCost="1.257e-006" StatementEstRows="1" StatementOptmLevel="FULL" QueryHash="0x830C952D7490168E" QueryPlanHash="0x3B1EAEC0618BFE3F" StatementOptmEarlyAbortReason="GoodEnoughPlanFound">
          <StatementSetOptions QUOTED_IDENTIFIER="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" NUMERIC_ROUNDABORT="false" />
          <QueryPlan NonParallelPlanReason="MaxDOPSetToOne" CachedPlanSize="8" CompileTime="0" CompileCPU="0" CompileMemory="376">
            <MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0" />
            <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="193313" EstimatedPagesCached="773254" EstimatedAvailableDegreeOfParallelism="1" />
            <RelOp NodeId="0" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="1e-007" AvgRowSize="75" EstimatedTotalSubtreeCost="1.257e-006" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
              <OutputList>
                <ColumnReference Column="Expr1001" />
              </OutputList>
              <ComputeScalar>
                <DefinedValues>
                  <DefinedValue>
                    <ColumnReference Column="Expr1001" />
                    <ScalarOperator ScalarString="CONVERT_IMPLICIT(varchar(128),[Expr1000],0)">
                      <Convert DataType="varchar" Length="128" Style="0" Implicit="1">
                        <ScalarOperator>
                          <Identifier>
                            <ColumnReference Column="Expr1000" />
                          </Identifier>
                        </ScalarOperator>
                      </Convert>
                    </ScalarOperator>
                  </DefinedValue>
                </DefinedValues>
                <RelOp NodeId="1" PhysicalOp="Constant Scan" LogicalOp="Constant Scan" EstimateRows="1" EstimateIO="0" EstimateCPU="1.157e-006" AvgRowSize="139" EstimatedTotalSubtreeCost="1.157e-006" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row">
                  <OutputList>
                    <ColumnReference Column="Expr1000" />
                  </OutputList>
                  <ConstantScan>
                    <Values>
                      <Row>
                        <ScalarOperator ScalarString="object_name(@@procid)">
                          <Intrinsic FunctionName="object_name">
                            <ScalarOperator>
                              <Intrinsic FunctionName="@@procid" />
                            </ScalarOperator>
                            <ScalarOperator>
                              <Const ConstValue="" />
                            </ScalarOperator>
                          </Intrinsic>
                        </ScalarOperator>
                      </Row>
                    </Values>
                  </ConstantScan>
                </RelOp>
              </ComputeScalar>
            </RelOp>
          </QueryPlan>
        </StmtSimple>
        <StmtSimple StatementText=" EXEC [dbo].[spEndStopwatch] @objectName, @stopwatchBeginTime;&#xD;&#xA;&#xD;&#xA;   " StatementId="27" StatementCompId="40" StatementType="EXECUTE PROC" RetrievedFromCache="true" />
        <StmtSimple StatementText=" RETURN @returnStatus;&#xD;" StatementId="28" StatementCompId="41" StatementType="RETURN" RetrievedFromCache="true" />
      </Statements>
    </Batch>
  </BatchSequence>
</ShowPlanXML>