IF EXISTS(SELECT * FROM (SELECT filegroups.data_space_id FROM [OurLabReporting].sys.indexes indexes INNER JOIN [OurLabReporting].sys.destination_data_spaces destination_data_spaces ON indexes.data_space_id = destination_data_spaces.partition_scheme_id INNER JOIN [OurLabReporting].sys.filegroups filegroups ON destination_data_spaces.data_space_id = filegroups.data_space_id WHERE filegroups.is_read_only = 1 AND indexes.[object_id] = @ParamObjectID AND indexes.[index_id] = @ParamIndexID UNION SELECT filegroups.data_space_id FROM [OurLabReporting].sys.indexes indexes INNER JOIN [OurLabReporting].sys.filegroups filegroups ON indexes.data_space_id = filegroups.data_space_id WHERE filegroups.is_read_only = 1 AND indexes.[object_id] = @ParamObjectID AND indexes.[index_id] = @ParamIndexID) ReadOnlyFileGroups) 